/*!
 * jQuery Guide Plug-In
 * http://github.com/tetsuwo/jquery-guide
 *
 * Copyright 2011, Tetsuwo OISHI
 * Dual licensed under the MIT license.
 */
(function(c){c.guide=function(b){function l(a){if(a){if(!b.data[b.index+1])return}else{if(!b.data[b.index+1]){b.loop&&(b.index=0,k(),h(!0));return}b.index++}f=b.data[b.index];m();var d=c(f.selector),g;c(e).find(".guideui-arrow").hide().end().find(".guideui-header").text(f.title).end().find(".guideui-body").text(f.body).end();switch(f.position){case "tr":a=d.position().top+d.height()+10;d=d.position().left-c(e).width()+d.width();g=a-300;break;case "br":a=d.position().top-c(e).height()-10;d=d.position().left-
c(e).width()+d.width();g=a-30;break;case "bl":a=d.position().top-c(e).height()-10;d=d.position().left+10;g=a-30;break;default:f.position="tl",a=d.position().top+d.height()+10,d=d.position().left+10,g=a-300}window.scroll(0,g);b.button.next&&(b.data.length===b.index+1?(j("last item"),c(e).find(".guideui-button-next").hide()):c(e).find(".guideui-button-next").show());c(e).css({top:a,left:d}).find(".guideui-arrow-"+f.position).show().end().show();h(!0)}function h(a){b.is_stored&&"function"===typeof c.cookie&&
(a?(j("storage write = "+(b.index+1)),c.cookie(b.name,b.index+1,b.cookie)):(j("storage read = "+parseInt(c.cookie(b.name)||0,10)),b.index=parseInt(c.cookie(b.name)||0,10)))}function k(){c(e).hide().find(".guideui-header").empty().end().find(".guideui-body").empty().end()}function m(a){f.link?a?window.location.href=f.link:c(e).find(".guideui-button-execute").show():"A"===c(f.selector).get(0).tagName.toUpperCase()?a?window.location.href=c(f.selector).attr("href"):c(e).find(".guideui-button-execute").show():
c(e).find(".guideui-button-execute").hide()}function j(a){b.debug&&console.log(a)}b=c.extend({},{name:"guide",appendTo:"body",index:0,is_stored:!0,loop:!1,debug:!1,data:[],rename:{execute:"Execute",next:"Next",close:"Close"},button:{execute:!0,next:!0,close:!0},cookie:{path:null,expires:null,domain:null,secure:!1}},b);var e="#guideui-"+b.name,f=null,a="",a=a+('<div id="'+e.substr(1)+'" class="guideui-container">'),a=a+'<div class="guideui-inner">',a=a+'<div class="guideui-content">',a=a+'<div class="guideui-header"> -- </div>',
a=a+'<div class="guideui-body"> -- </div>',a=a+'<div class="guideui-footer">';b.button.execute&&(a+='<input type="button" class="guideui-button-execute" value="'+b.rename.execute+'" />');b.button.next&&(a+='<input type="button" class="guideui-button-next" value="'+b.rename.next+'" />');b.button.close&&(a+='<input type="button" class="guideui-button-close" value="'+b.rename.close+'" />');a+="</div>";a+="</div>";a+='<i class="guideui-arrow guideui-arrow-lt"></i>';a+='<i class="guideui-arrow guideui-arrow-tr"></i>';
a+='<i class="guideui-arrow guideui-arrow-tl"></i>';a+='<i class="guideui-arrow guideui-arrow-bl"></i>';a+='<i class="guideui-arrow guideui-arrow-br"></i>';a+="</div>";a+="</div>";c(document).ready(function(){c(e).length||c(b.appendTo).append(a);c(e).find(".guideui-button-close").unbind("click").bind("click",function(){j(b.data.length);b.index=b.data.length-1;h(!0);k()});c(e).find(".guideui-button-next").unbind("click").bind("click",function(){k();l(!1)});c(e).find(".guideui-button-execute").unbind("click").bind("click",
function(){m(!0)});h();l(!0)})}})(jQuery);
